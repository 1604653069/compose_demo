# Jetpack Compose 布局和容器组件完全指南

## 前言

在 Jetpack Compose 中，布局和容器组件是构建用户界面的骨架。它们负责组织和管理其他组件的位置、大小和排列方式。本文将详细介绍 Compose 中的核心布局组件，包括 Card、Surface、Scaffold 以及常用的布局修饰符，帮助你创建结构清晰、层次分明的界面设计。

---

## 1. Card 组件 - 卡片式内容容器

Card 是 Material Design 中常用的容器组件，用于将相关内容组织在一起。

### 1.1 基础卡片

```kotlin
@Composable
fun BasicCardExample() {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(16.dp),
        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
    ) {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            Text(
                text = "卡片标题",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )
            Text(
                text = "这是一个基础的卡片组件，用于组织相关内容。",
                style = MaterialTheme.typography.bodyMedium
            )
        }
    }
}
```

### 1.2 不同类型的卡片

```kotlin
@Composable
fun CardVariationsExample() {
    var selectedCard by remember { mutableIntStateOf(-1) }

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 基础卡片
        Card(
            modifier = Modifier.fillMaxWidth()
        ) {
            Column(modifier = Modifier.padding(16.dp)) {
                Text("基础卡片", style = MaterialTheme.typography.titleMedium)
                Text("默认样式的卡片组件")
            }
        }

        // ElevatedCard - 具有高度感的卡片
        ElevatedCard(
            modifier = Modifier.fillMaxWidth(),
            elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)
        ) {
            Column(modifier = Modifier.padding(16.dp)) {
                Text("ElevatedCard", style = MaterialTheme.typography.titleMedium)
                Text("具有更高高度的卡片，提供更强的层次感")
            }
        }

        // OutlinedCard - 带边框的卡片
        OutlinedCard(
            modifier = Modifier.fillMaxWidth(),
            border = CardDefaults.outlinedCardBorder()
        ) {
            Column(modifier = Modifier.padding(16.dp)) {
                Text("OutlinedCard", style = MaterialTheme.typography.titleMedium)
                Text("带边框的卡片，没有阴影效果")
            }
        }

        // 可点击的卡片
        Card(
            modifier = Modifier.fillMaxWidth(),
            onClick = {
                selectedCard = if (selectedCard == 1) 0 else 1
            },
            colors = CardDefaults.cardColors(
                containerColor = if (selectedCard == 1)
                    MaterialTheme.colorScheme.primaryContainer
                else MaterialTheme.colorScheme.surface
            )
        ) {
            Row(
                modifier = Modifier.padding(16.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                RadioButton(
                    selected = selectedCard == 1,
                    onClick = {
                        selectedCard = if (selectedCard == 1) 0 else 1
                    }
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = "可选择的卡片",
                    style = MaterialTheme.typography.titleMedium,
                    modifier = Modifier.weight(1f)
                )
                if (selectedCard == 1) {
                    Icon(
                        imageVector = Icons.Default.Check,
                        contentDescription = "已选择",
                        tint = MaterialTheme.colorScheme.primary
                    )
                }
            }
        }
    }
}
```

### 1.3 自定义颜色和形状的卡片

```kotlin
@Composable
fun CustomCardExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 使用主题颜色的卡片
        Card(
            modifier = Modifier.fillMaxWidth(),
            colors = CardDefaults.cardColors(
                containerColor = MaterialTheme.colorScheme.primaryContainer
            )
        ) {
            Row(
                modifier = Modifier.padding(16.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                Icon(
                    imageVector = Icons.Default.Info,
                    contentDescription = "信息",
                    tint = MaterialTheme.colorScheme.onPrimaryContainer,
                    modifier = Modifier.size(24.dp)
                )
                Spacer(modifier = Modifier.width(12.dp))
                Column(modifier = Modifier.weight(1f)) {
                    Text(
                        text = "信息卡片",
                        style = MaterialTheme.typography.titleMedium,
                        color = MaterialTheme.colorScheme.onPrimaryContainer
                    )
                    Text(
                        text = "使用主题颜色的信息展示",
                        style = MaterialTheme.typography.bodyMedium,
                        color = MaterialTheme.colorScheme.onPrimaryContainer
                    )
                }
            }
        }

        // 自定义形状的卡片
        Card(
            modifier = Modifier.fillMaxWidth(),
            shape = RoundedCornerShape(16.dp),
            elevation = CardDefaults.cardElevation(defaultElevation = 6.dp)
        ) {
            Box(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(120.dp)
                    .background(
                        Brush.horizontalGradient(
                            colors = listOf(
                                MaterialTheme.colorScheme.primary,
                                MaterialTheme.colorScheme.secondary
                            )
                        )
                    ),
                contentAlignment = Alignment.Center
            ) {
                Text(
                    text = "渐变背景卡片",
                    style = MaterialTheme.typography.titleLarge,
                    color = MaterialTheme.colorScheme.onPrimary
                )
            }
        }
    }
}
```

### 1.4 卡片网格布局

```kotlin
@Composable
fun CardGridExample() {
    val items = listOf(
        Triple(Icons.Default.Home, "主页", "应用主页"),
        Triple(Icons.Default.Settings, "设置", "系统设置"),
        Triple(Icons.Default.Person, "个人", "个人中心"),
        Triple(Icons.Default.Favorite, "收藏", "我的收藏"),
        Triple(Icons.Default.Notifications, "通知", "消息通知"),
        Triple(Icons.Default.Camera, "相机", "拍照功能")
    )

    LazyVerticalGrid(
        columns = GridCells.Fixed(2),
        horizontalArrangement = Arrangement.spacedBy(8.dp),
        verticalArrangement = Arrangement.spacedBy(8.dp),
        modifier = Modifier.padding(16.dp)
    ) {
        items(items) { (icon, title, subtitle) ->
            Card(
                modifier = Modifier
                    .fillMaxWidth()
                    .aspectRatio(1f),
                onClick = { /* 处理点击 */ }
            ) {
                Column(
                    modifier = Modifier
                        .fillMaxSize()
                        .padding(16.dp),
                    horizontalAlignment = Alignment.CenterHorizontally,
                    verticalArrangement = Arrangement.Center
                ) {
                    Icon(
                        imageVector = icon,
                        contentDescription = title,
                        tint = MaterialTheme.colorScheme.primary,
                        modifier = Modifier.size(48.dp)
                    )
                    Spacer(modifier = Modifier.height(8.dp))
                    Text(
                        text = title,
                        style = MaterialTheme.typography.titleMedium
                    )
                    Text(
                        text = subtitle,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }
        }
    }
}
```

---

## 2. Surface 组件 - 多功能绘制表面

Surface 是 Compose 中最灵活的容器组件，可以控制形状、颜色、高度等属性。

### 2.1 基础 Surface 用法

```kotlin
@Composable
fun BasicSurfaceExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 基础 Surface
        Surface(
            modifier = Modifier.fillMaxWidth(),
            shadowElevation = 2.dp,
            tonalElevation = 1.dp
        ) {
            Text(
                text = "基础 Surface",
                modifier = Modifier.padding(16.dp),
                style = MaterialTheme.typography.titleMedium
            )
        }

        // 彩色 Surface
        Surface(
            modifier = Modifier.fillMaxWidth(),
            color = MaterialTheme.colorScheme.primary,
            contentColor = MaterialTheme.colorScheme.onPrimary,
            shadowElevation = 4.dp
        ) {
            Text(
                text = "彩色 Surface",
                modifier = Modifier.padding(16.dp),
                style = MaterialTheme.typography.titleMedium
            )
        }
    }
}
```

### 2.2 不同形状的 Surface

```kotlin
@Composable
fun SurfaceShapesExample() {
    Row(
        modifier = Modifier.fillMaxWidth(),
        horizontalArrangement = Arrangement.spacedBy(8.dp)
    ) {
        // 小圆角
        Surface(
            modifier = Modifier
                .size(80.dp)
                .weight(1f),
            shape = MaterialTheme.shapes.small,
            color = MaterialTheme.colorScheme.surfaceVariant,
            shadowElevation = 4.dp
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text("Small")
            }
        }

        // 中等圆角
        Surface(
            modifier = Modifier
                .size(80.dp)
                .weight(1f),
            shape = MaterialTheme.shapes.medium,
            color = MaterialTheme.colorScheme.surfaceVariant,
            shadowElevation = 4.dp
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text("Medium")
            }
        }

        // 大圆角
        Surface(
            modifier = Modifier
                .size(80.dp)
                .weight(1f),
            shape = MaterialTheme.shapes.large,
            color = MaterialTheme.colorScheme.surfaceVariant,
            shadowElevation = 4.dp
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text("Large")
            }
        }
    }
}
```

### 2.3 带边框的 Surface

```kotlin
@Composable
fun BorderedSurfaceExample() {
    Surface(
        modifier = Modifier.fillMaxWidth(),
        shape = MaterialTheme.shapes.medium,
        border = ButtonDefaults.outlinedButtonBorder.copy(
            width = 2.dp
        ),
        shadowElevation = 1.dp,
        onClick = { /* 处理点击 */ }
    ) {
        Row(
            modifier = Modifier.padding(16.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            Surface(
                modifier = Modifier.size(48.dp),
                color = MaterialTheme.colorScheme.primaryContainer,
                shape = CircleShape
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Text(
                        text = "A",
                        style = MaterialTheme.typography.titleLarge,
                        color = MaterialTheme.colorScheme.onPrimaryContainer
                    )
                }
            }
            Spacer(modifier = Modifier.width(12.dp))
            Column(modifier = Modifier.weight(1f)) {
                Text(
                    text = "带边框的 Surface",
                    style = MaterialTheme.typography.titleMedium
                )
                Text(
                    text = "使用边框装饰的容器组件",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }
    }
}
```

### 2.4 Surface 组合示例

```kotlin
@Composable
fun NestedSurfaceExample() {
    Surface(
        modifier = Modifier.fillMaxWidth(),
        color = MaterialTheme.colorScheme.surfaceVariant,
        shape = MaterialTheme.shapes.medium,
        shadowElevation = 3.dp
    ) {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "嵌套 Surface 示例",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Row(
                verticalAlignment = Alignment.CenterVertically
            ) {
                Surface(
                    modifier = Modifier.size(48.dp),
                    color = MaterialTheme.colorScheme.primary,
                    shape = CircleShape
                ) {
                    Box(contentAlignment = Alignment.Center) {
                        Text(
                            text = "A",
                            style = MaterialTheme.typography.titleLarge,
                            color = MaterialTheme.colorScheme.onPrimary
                        )
                    }
                }
                Spacer(modifier = Modifier.width(12.dp))
                Column(modifier = Modifier.weight(1f)) {
                    Text(
                        text = "用户名",
                        style = MaterialTheme.typography.titleMedium
                    )
                    Text(
                        text = "user@example.com",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }

            HorizontalDivider(
                modifier = Modifier.padding(vertical = 4.dp),
                color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.12f)
            )

            Surface(
                modifier = Modifier.fillMaxWidth(),
                color = MaterialTheme.colorScheme.surface,
                shape = MaterialTheme.shapes.small
            ) {
                Text(
                    text = "这是一个嵌套Surface的示例",
                    modifier = Modifier.padding(12.dp),
                    style = MaterialTheme.typography.bodyMedium
                )
            }
        }
    }
}
```

---

## 3. Scaffold 组件 - 应用页面骨架

Scaffold 提供了完整的 Material Design 页面结构，包括顶部栏、底部栏、悬浮按钮等。

### 3.1 基础 Scaffold

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun BasicScaffoldExample() {
    var fabCount by remember { mutableIntStateOf(0) }
    var selectedTab by remember { mutableIntStateOf(0) }

    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("Scaffold 示例") },
                navigationIcon = {
                    IconButton(onClick = { /* 导航菜单 */ }) {
                        Icon(
                            imageVector = Icons.Default.Menu,
                            contentDescription = "菜单"
                        )
                    }
                },
                actions = {
                    IconButton(onClick = { /* 搜索 */ }) {
                        Icon(
                            imageVector = Icons.Default.Search,
                            contentDescription = "搜索"
                        )
                    }
                    IconButton(onClick = { /* 更多 */ }) {
                        Icon(
                            imageVector = Icons.Default.MoreVert,
                            contentDescription = "更多"
                        )
                    }
                }
            )
        },
        bottomBar = {
            NavigationBar {
                NavigationBarItem(
                    icon = {
                        Icon(
                            imageVector = Icons.Default.Home,
                            contentDescription = "主页"
                        )
                    },
                    label = { Text("主页") },
                    selected = selectedTab == 0,
                    onClick = { selectedTab = 0 }
                )
                NavigationBarItem(
                    icon = {
                        Icon(
                            imageVector = Icons.Default.Search,
                            contentDescription = "搜索"
                        )
                    },
                    label = { Text("搜索") },
                    selected = selectedTab == 1,
                    onClick = { selectedTab = 1 }
                )
                NavigationBarItem(
                    icon = {
                        Icon(
                            imageVector = Icons.Default.Person,
                            contentDescription = "个人"
                        )
                    },
                    label = { Text("个人") },
                    selected = selectedTab == 2,
                    onClick = { selectedTab = 2 }
                )
            }
        },
        floatingActionButton = {
            FloatingActionButton(
                onClick = { fabCount++ }
            ) {
                Icon(
                    imageVector = Icons.Default.Add,
                    contentDescription = "添加"
                )
            }
        },
        floatingActionButtonPosition = FabPosition.End
    ) { paddingValues ->
        LazyColumn(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
                .padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            item {
                Card {
                    Column(modifier = Modifier.padding(16.dp)) {
                        Text(
                            text = "Scaffold 介绍",
                            style = MaterialTheme.typography.titleMedium,
                            fontWeight = FontWeight.Bold
                        )
                        Text(
                            text = "Scaffold 是Material Design 3的基础布局组件，" +
                                  "提供了完整的应用界面结构。",
                            style = MaterialTheme.typography.bodyMedium
                        )
                    }
                }
            }

            item {
                Card {
                    Column(modifier = Modifier.padding(16.dp)) {
                        Text(
                            text = "当前状态",
                            style = MaterialTheme.typography.titleMedium,
                            fontWeight = FontWeight.Bold
                        )
                        Text("FAB 点击次数: $fabCount")
                        Text("选中标签: ${listOf("主页", "搜索", "个人")[selectedTab]}")
                    }
                }
            }

            items(fabCount) { index ->
                Card {
                    Row(
                        modifier = Modifier.padding(16.dp),
                        verticalAlignment = Alignment.CenterVertically
                    ) {
                        Surface(
                            modifier = Modifier.size(48.dp),
                            color = MaterialTheme.colorScheme.primaryContainer,
                            shape = CircleShape
                        ) {
                            Box(contentAlignment = Alignment.Center) {
                                Text(
                                    text = "${index + 1}",
                                    style = MaterialTheme.typography.titleMedium,
                                    color = MaterialTheme.colorScheme.onPrimaryContainer
                                )
                            }
                        }
                        Spacer(modifier = Modifier.width(12.dp))
                        Column(modifier = Modifier.weight(1f)) {
                            Text(
                                text = "内容项目 ${index + 1}",
                                style = MaterialTheme.typography.titleMedium
                            )
                            Text(
                                text = "通过 FAB 添加的项目",
                                style = MaterialTheme.typography.bodySmall,
                                color = MaterialTheme.colorScheme.onSurfaceVariant
                            )
                        }
                    }
                }
            }
        }
    }
}
```

### 3.2 带 SnackBar 的 Scaffold

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ScaffoldWithSnackBarExample() {
    val snackbarHostState = remember { SnackbarHostState() }
    var messageCount by remember { mutableIntStateOf(0) }

    Scaffold(
        snackbarHost = { SnackbarHost(hostState = snackbarHostState) },
        topBar = {
            TopAppBar(
                title = { Text("SnackBar 示例") }
            )
        },
        floatingActionButton = {
            FloatingActionButton(
                onClick = {
                    messageCount++
                    CoroutineScope(Dispatchers.Main).launch {
                        snackbarHostState.showSnackbar(
                            message = "这是第 $messageCount 条消息",
                            actionLabel = "撤销",
                            duration = SnackbarDuration.Short
                        )
                    }
                }
            ) {
                Icon(Icons.Default.Message, contentDescription = "显示消息")
            }
        }
    ) { paddingValues ->
        Column(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues)
                .padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            Text(
                text = "SnackBar 使用示例",
                style = MaterialTheme.typography.headlineMedium
            )

            Text(
                text = "点击右下角的浮动按钮来显示 SnackBar 消息。" +
                      "SnackBar 是临时消息提示，会在屏幕底部显示。",
                style = MaterialTheme.typography.bodyMedium
            )

            Card {
                Column(modifier = Modifier.padding(16.dp)) {
                    Text(
                        text = "SnackBar 特点",
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )
                    Text("• 临时消息提示")
                    Text("• 可以包含操作按钮")
                    Text("• 自动消失或手动关闭")
                    Text("• 不影响用户操作")
                }
            }
        }
    }
}
```

### 3.3 带 Drawer 的 Scaffold

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun ScaffoldWithDrawerExample() {
    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)
    val scope = rememberCoroutineScope()
    var selectedScreen by remember { mutableStateOf("主页") }

    ModalNavigationDrawer(
        drawerState = drawerState,
        drawerContent = {
            ModalDrawerSheet {
                Text(
                    text = "应用菜单",
                    modifier = Modifier.padding(16.dp),
                    style = MaterialTheme.typography.titleLarge
                )

                HorizontalDivider()

                val menuItems = listOf("主页", "设置", "帮助", "关于")
                menuItems.forEach { screen ->
                    NavigationDrawerItem(
                        icon = {
                            Icon(
                                imageVector = when (screen) {
                                    "主页" -> Icons.Default.Home
                                    "设置" -> Icons.Default.Settings
                                    "帮助" -> Icons.Default.Help
                                    "关于" -> Icons.Default.Info
                                    else -> Icons.Default.Menu
                                },
                                contentDescription = screen
                            )
                        },
                        label = { Text(screen) },
                        selected = selectedScreen == screen,
                        onClick = {
                            selectedScreen = screen
                            scope.launch { drawerState.close() }
                        },
                        modifier = Modifier.padding(horizontal = 12.dp, vertical = 4.dp)
                    )
                }
            }
        }
    ) {
        Scaffold(
            topBar = {
                TopAppBar(
                    title = { Text(selectedScreen) },
                    navigationIcon = {
                        IconButton(onClick = {
                            scope.launch { drawerState.open() }
                        }) {
                            Icon(
                                imageVector = Icons.Default.Menu,
                                contentDescription = "打开菜单"
                            )
                        }
                    }
                )
            }
        ) { paddingValues ->
            Column(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(paddingValues)
                    .padding(16.dp),
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.Center
            ) {
                Text(
                    text = "当前页面: $selectedScreen",
                    style = MaterialTheme.typography.headlineMedium
                )
                Text(
                    text = "点击左上角菜单图标打开抽屉导航",
                    style = MaterialTheme.typography.bodyMedium,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }
    }
}
```

---

## 4. 布局修饰符 - 灵活控制组件位置

布局修饰符是 Compose 中控制组件位置、大小、间距的主要工具。

### 4.1 Padding 和 Margin

```kotlin
@Composable
fun PaddingAndMarginExample() {
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp) // 外边距
    ) {
        Surface(
            modifier = Modifier
                .fillMaxWidth()
                .padding(8.dp), // 组件内边距
            color = MaterialTheme.colorScheme.primaryContainer,
            shape = RoundedCornerShape(8.dp)
        ) {
            Text(
                text = "带内边距的 Surface",
                modifier = Modifier.padding(16.dp), // 内容边距
                style = MaterialTheme.typography.titleMedium
            )
        }

        Spacer(modifier = Modifier.height(16.dp)) // 垂直间距

        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.spacedBy(8.dp) // 水平间距
        ) {
            Surface(
                modifier = Modifier
                    .weight(1f)
                    .height(60.dp),
                color = MaterialTheme.colorScheme.secondaryContainer
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Text("项目 1")
                }
            }

            Surface(
                modifier = Modifier
                    .weight(1f)
                    .height(60.dp),
                color = MaterialTheme.colorScheme.tertiaryContainer
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Text("项目 2")
                }
            }
        }
    }
}
```

### 4.2 Size 修饰符

```kotlin
@Composable
fun SizeModifiersExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 固定尺寸
        Surface(
            modifier = Modifier.size(100.dp),
            color = MaterialTheme.colorScheme.primaryContainer
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text("100x100")
            }
        }

        // 宽高比
        Surface(
            modifier = Modifier
                .fillMaxWidth()
                .aspectRatio(16f / 9f), // 16:9 宽高比
            color = MaterialTheme.colorScheme.secondaryContainer
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text("16:9 比例")
            }
        }

        // 自适应尺寸
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            Surface(
                modifier = Modifier
                    .width(100.dp) // 固定宽度
                    .height(60.dp), // 固定高度
                color = MaterialTheme.colorScheme.tertiaryContainer
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Text("固定")
                }
            }

            Surface(
                modifier = Modifier
                    .weight(1f) // 占据剩余空间
                    .height(60.dp),
                color = MaterialTheme.colorScheme.surfaceVariant
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Text("自适应")
                }
            }
        }
    }
}
```

### 4.3 背景和边框

```kotlin
@Composable
fun BackgroundAndBorderExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 简单背景
        Surface(
            modifier = Modifier
                .fillMaxWidth()
                .height(60.dp)
                .background(
                    color = MaterialTheme.colorScheme.primary,
                    shape = RoundedCornerShape(8.dp)
                )
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text(
                    text = "背景颜色",
                    color = MaterialTheme.colorScheme.onPrimary
                )
            }
        }

        // 渐变背景
        Surface(
            modifier = Modifier
                .fillMaxWidth()
                .height(60.dp)
                .background(
                    brush = Brush.horizontalGradient(
                        colors = listOf(
                            MaterialTheme.colorScheme.primary,
                            MaterialTheme.colorScheme.secondary,
                            MaterialTheme.colorScheme.tertiary
                        )
                    ),
                    shape = RoundedCornerShape(8.dp)
                )
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text(
                    text = "渐变背景",
                    color = MaterialTheme.colorScheme.onPrimary
                )
            }
        }

        // 带边框
        Surface(
            modifier = Modifier
                .fillMaxWidth()
                .height(60.dp)
                .border(
                    width = 2.dp,
                    color = MaterialTheme.colorScheme.primary,
                    shape = RoundedCornerShape(8.dp)
                ),
            color = MaterialTheme.colorScheme.surface
        ) {
            Box(contentAlignment = Alignment.Center) {
                Text("带边框")
            }
        }
    }
}
```

---

## 5. 实践示例：完整的设置页面

让我们结合所有学到的布局组件，创建一个完整的设置页面：

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun SettingsPageExample() {
    var notificationsEnabled by remember { mutableStateOf(true) }
    var darkMode by remember { mutableStateOf(false) }
    var autoUpdate by remember { mutableStateOf(false) }

    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("设置") },
                navigationIcon = {
                    IconButton(onClick = { /* 返回 */ }) {
                        Icon(
                            imageVector = Icons.Default.ArrowBack,
                            contentDescription = "返回"
                        )
                    }
                }
            )
        }
    ) { paddingValues ->
        LazyColumn(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            // 用户信息卡片
            item {
                Card(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(horizontal = 16.dp),
                    elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)
                ) {
                    Row(
                        modifier = Modifier.padding(16.dp),
                        verticalAlignment = Alignment.CenterVertically
                    ) {
                        Surface(
                            modifier = Modifier.size(64.dp),
                            shape = CircleShape,
                            color = MaterialTheme.colorScheme.primaryContainer
                        ) {
                            Box(contentAlignment = Alignment.Center) {
                                Icon(
                                    imageVector = Icons.Default.Person,
                                    contentDescription = "头像",
                                    modifier = Modifier.size(32.dp),
                                    tint = MaterialTheme.colorScheme.onPrimaryContainer
                                )
                            }
                        }

                        Spacer(modifier = Modifier.width(16.dp))

                        Column(modifier = Modifier.weight(1f)) {
                            Text(
                                text = "用户名称",
                                style = MaterialTheme.typography.titleMedium
                            )
                            Text(
                                text = "user@example.com",
                                style = MaterialTheme.typography.bodyMedium,
                                color = MaterialTheme.colorScheme.onSurfaceVariant
                            )
                        }

                        IconButton(onClick = { /* 编辑用户信息 */ }) {
                            Icon(
                                imageVector = Icons.Default.Edit,
                                contentDescription = "编辑"
                            )
                        }
                    }
                }
            }

            // 通知设置
            item {
                Card(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(horizontal = 16.dp)
                ) {
                    Column(
                        modifier = Modifier.padding(16.dp),
                        verticalArrangement = Arrangement.spacedBy(16.dp)
                    ) {
                        Text(
                            text = "通知设置",
                            style = MaterialTheme.typography.titleMedium,
                            fontWeight = FontWeight.Bold
                        )

                        Surface(
                            modifier = Modifier.fillMaxWidth(),
                            shape = RoundedCornerShape(12.dp),
                            color = MaterialTheme.colorScheme.surfaceVariant
                        ) {
                            Column(modifier = Modifier.padding(12.dp)) {
                                Row(
                                    modifier = Modifier.fillMaxWidth(),
                                    horizontalArrangement = Arrangement.SpaceBetween,
                                    verticalAlignment = Alignment.CenterVertically
                                ) {
                                    Column(modifier = Modifier.weight(1f)) {
                                        Text(
                                            text = "推送通知",
                                            style = MaterialTheme.typography.titleSmall
                                        )
                                        Text(
                                            text = "接收应用推送通知",
                                            style = MaterialTheme.typography.bodySmall,
                                            color = MaterialTheme.colorScheme.onSurfaceVariant
                                        )
                                    }
                                    Switch(
                                        checked = notificationsEnabled,
                                        onCheckedChange = { notificationsEnabled = it }
                                    )
                                }
                            }
                        }
                    }
                }
            }

            // 外观设置
            item {
                Card(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(horizontal = 16.dp)
                ) {
                    Column(
                        modifier = Modifier.padding(16.dp),
                        verticalArrangement = Arrangement.spacedBy(16.dp)
                    ) {
                        Text(
                            text = "外观设置",
                            style = MaterialTheme.typography.titleMedium,
                            fontWeight = FontWeight.Bold
                        )

                        Surface(
                            modifier = Modifier.fillMaxWidth(),
                            shape = RoundedCornerShape(12.dp),
                            color = MaterialTheme.colorScheme.surfaceVariant
                        ) {
                            Column(modifier = Modifier.padding(12.dp)) {
                                Row(
                                    modifier = Modifier.fillMaxWidth(),
                                    horizontalArrangement = Arrangement.SpaceBetween,
                                    verticalAlignment = Alignment.CenterVertically
                                ) {
                                    Column(modifier = Modifier.weight(1f)) {
                                        Text(
                                            text = "深色模式",
                                            style = MaterialTheme.typography.titleSmall
                                        )
                                        Text(
                                            text = "切换应用主题",
                                            style = MaterialTheme.typography.bodySmall,
                                            color = MaterialTheme.colorScheme.onSurfaceVariant
                                        )
                                    }
                                    Switch(
                                        checked = darkMode,
                                        onCheckedChange = { darkMode = it }
                                    )
                                }
                            }
                        }
                    }
                }
            }

            // 其他设置项
            item {
                Card(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(horizontal = 16.dp)
                ) {
                    Column(
                        modifier = Modifier.padding(16.dp),
                        verticalArrangement = Arrangement.spacedBy(12.dp)
                    ) {
                        Text(
                            text = "其他设置",
                            style = MaterialTheme.typography.titleMedium,
                            fontWeight = FontWeight.Bold
                        )

                        // 设置项列表
                        listOf(
                            "关于应用" to Icons.Default.Info,
                            "隐私政策" to Icons.Default.Security,
                            "用户协议" to Icons.Default.Description,
                            "帮助与反馈" to Icons.Default.Help
                        ).forEach { (title, icon) ->
                            Surface(
                                modifier = Modifier
                                    .fillMaxWidth()
                                    .clickable { /* 处理点击 */ },
                                shape = RoundedCornerShape(8.dp)
                            ) {
                                Row(
                                    modifier = Modifier
                                        .fillMaxWidth()
                                        .padding(12.dp),
                                    verticalAlignment = Alignment.CenterVertically
                                ) {
                                    Surface(
                                        modifier = Modifier.size(40.dp),
                                        shape = CircleShape,
                                        color = MaterialTheme.colorScheme.primaryContainer
                                    ) {
                                        Box(contentAlignment = Alignment.Center) {
                                            Icon(
                                                imageVector = icon,
                                                contentDescription = title,
                                                modifier = Modifier.size(20.dp),
                                                tint = MaterialTheme.colorScheme.onPrimaryContainer
                                            )
                                        }
                                    }

                                    Spacer(modifier = Modifier.width(12.dp))

                                    Text(
                                        text = title,
                                        style = MaterialTheme.typography.bodyLarge,
                                        modifier = Modifier.weight(1f)
                                    )

                                    Icon(
                                        imageVector = Icons.Default.ChevronRight,
                                        contentDescription = "进入",
                                        tint = MaterialTheme.colorScheme.onSurfaceVariant
                                    )
                                }
                            }
                        }
                    }
                }
            }

            // 底部间距
            item {
                Spacer(modifier = Modifier.height(16.dp))
            }
        }
    }
}
```

---

## 6. 最佳实践

### 6.1 布局层次优化

1. **避免过度嵌套**：尽量保持布局层次的扁平化
2. **合理使用 LazyColumn/LazyRow**：对于长列表使用懒加载
3. **注意重组性能**：避免不必要的重组操作

### 6.2 响应式设计

```kotlin
@Composable
fun ResponsiveLayout() {
    BoxWithConstraints {
        if (maxWidth < 600.dp) {
            // 手机布局 - 垂直排列
            MobileLayout()
        } else {
            // 平板/桌面布局 - 水平排列
            TabletLayout()
        }
    }
}
```

### 6.3 无障碍支持

1. **添加适当的 contentDescription**：为图片和图标添加描述
2. **支持触控放大**：确保文字和按钮足够大
3. **颜色对比度**：确保颜色组合具有良好的对比度

---

## 7. 总结

布局和容器组件是构建 Compose 应用界面的基础。通过掌握这些组件，你可以：

1. **创建结构化的内容**：使用 Card 和 Surface 组织相关内容
2. **构建完整页面**：使用 Scaffold 实现标准应用页面结构
3. **灵活控制布局**：使用修饰符精确控制组件位置和样式
4. **提升用户体验**：创建美观、响应式和无障碍的界面

在下一篇文章中，我们将探讨选择和输入组件，学习如何实现用户交互和数据输入功能。

---

## 相关资源

- [Material 3 Layout Documentation](https://m3.material.io/foundations/layout)
- [Compose Layout Documentation](https://developer.android.com/jetpack/compose/layouts)
- [Compose Modifiers Documentation](https://developer.android.com/jetpack/compose/modifiers)

---

*本文基于 Android Jetpack Compose 最新版本编写，部分 API 可能会随着版本更新而变化。*