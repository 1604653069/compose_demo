# Jetpack Compose 选择和输入组件完全指南

## 前言

在现代移动应用中，选择和输入组件是用户交互的核心。它们不仅收集用户数据，还提供直观的操作方式。本文将详细介绍 Jetpack Compose 中的选择和输入组件，包括 Checkbox、RadioButton、Switch、Slider、ProgressBar 等，帮助你构建功能丰富且用户友好的交互界面。

---

## 1. Checkbox 组件 - 多选框

Checkbox 允许用户从多个选项中选择一个或多个，是表单和设置页面中常用的组件。

### 1.1 基础复选框

```kotlin
@Composable
fun BasicCheckboxExample() {
    var checked by remember { mutableStateOf(false) }

    Row(
        verticalAlignment = Alignment.CenterVertically,
        modifier = Modifier
            .fillMaxWidth()
            .selectable(
                selected = checked,
                onClick = { checked = !checked },
                role = Role.Checkbox
            )
            .padding(vertical = 8.dp)
    ) {
        Checkbox(
            checked = checked,
            onCheckedChange = { checked = it }
        )
        Spacer(modifier = Modifier.width(8.dp))
        Text("同意条款和条件")
    }
}
```

### 1.2 复选框组

```kotlin
@Composable
fun CheckboxGroupExample() {
    val options = listOf(
        "启用通知" to false,
        "自动更新" to true,
        "记住密码" to false
    )
    val checkedStates = remember { mutableStateMapOf(*options.toTypedArray()) }

    Column(
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        Text(
            text = "应用设置",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        options.forEach { (label, initialValue) ->
            val checked = checkedStates.getOrPut(label) { initialValue }

            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .selectable(
                        selected = checked,
                        onClick = { checkedStates[label] = !checked },
                        role = Role.Checkbox
                    )
                    .padding(vertical = 4.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                Checkbox(
                    checked = checked,
                    onCheckedChange = { checkedStates[label] = it }
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = label,
                    style = MaterialTheme.typography.bodyLarge
                )
            }
        }
    }
}
```

### 1.3 全选功能

```kotlin
@Composable
fun MasterCheckboxExample() {
    val items = listOf("选项 A", "选项 B", "选项 C", "选项 D")
    val checkedStates = remember { mutableStateMapOf<String, Boolean>() }

    // 初始化所有项目为未选中
    items.forEach { item ->
        checkedStates.getOrPut(item) { false }
    }

    val allChecked = checkedStates.values.all { it }
    val someChecked = checkedStates.values.any { it }
    val indeterminate = someChecked && !allChecked

    Column(
        modifier = Modifier.padding(16.dp),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        // 全选复选框
        Card {
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .selectable(
                        selected = allChecked,
                        onClick = {
                            val newState = !allChecked
                            items.forEach { item ->
                                checkedStates[item] = newState
                            }
                        },
                        role = Role.Checkbox
                    )
                    .padding(16.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                Checkbox(
                    checked = allChecked,
                    onCheckedChange = { checked ->
                        items.forEach { item ->
                            checkedStates[item] = checked
                        }
                    },
                    indeterminate = indeterminate
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = "全选 (${checkedStates.values.count { it }}/${items.size})",
                    style = MaterialTheme.typography.titleMedium,
                    fontWeight = FontWeight.Bold
                )
            }
        }

        // 子项目复选框
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                items.forEach { item ->
                    val checked = checkedStates[item] ?: false
                    Row(
                        modifier = Modifier
                            .fillMaxWidth()
                            .selectable(
                                selected = checked,
                                onClick = { checkedStates[item] = !checked },
                                role = Role.Checkbox
                            )
                            .padding(vertical = 4.dp),
                        verticalAlignment = Alignment.CenterVertically
                    ) {
                        Checkbox(
                            checked = checked,
                            onCheckedChange = { checkedStates[item] = it }
                        )
                        Spacer(modifier = Modifier.width(8.dp))
                        Text(item)
                    }
                }
            }
        }
    }
}
```

### 1.4 自定义样式复选框

```kotlin
@Composable
fun CustomCheckboxExample() {
    val checkedStates = remember { mutableStateMapOf<String, Boolean>() }

    Column(
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        // 默认样式
        CustomCheckboxItem(
            title = "默认样式",
            checked = checkedStates.getOrPut("default") { false },
            onCheckedChange = { checkedStates["default"] = it }
        )

        // 错误样式
        CustomCheckboxItem(
            title = "错误样式",
            checked = checkedStates.getOrPut("error") { false },
            onCheckedChange = { checkedStates["error"] = it },
            colors = CheckboxDefaults.colors(
                checkedColor = MaterialTheme.colorScheme.error,
                uncheckedColor = MaterialTheme.colorScheme.error
            )
        )

        // 禁用样式
        CustomCheckboxItem(
            title = "禁用状态",
            checked = checkedStates.getOrPut("disabled") { true },
            onCheckedChange = { },
            enabled = false
        )
    }
}

@Composable
private fun CustomCheckboxItem(
    title: String,
    checked: Boolean,
    onCheckedChange: (Boolean) -> Unit,
    enabled: Boolean = true,
    colors: CheckboxColors = CheckboxDefaults.colors()
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .selectable(
                selected = checked,
                onClick = { if (enabled) onCheckedChange(!checked) },
                enabled = enabled,
                role = Role.Checkbox
            )
            .padding(vertical = 4.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Checkbox(
            checked = checked,
            onCheckedChange = onCheckedChange,
            enabled = enabled,
            colors = colors
        )
        Spacer(modifier = Modifier.width(8.dp))
        Text(
            text = title,
            style = MaterialTheme.typography.bodyLarge,
            color = if (enabled) MaterialTheme.colorScheme.onSurface
                   else MaterialTheme.colorScheme.onSurface.copy(alpha = 0.38f)
        )
    }
}
```

---

## 2. RadioButton 组件 - 单选按钮

RadioButton 用于让用户从多个选项中选择唯一一个，适用于互斥的选择场景。

### 2.1 基础单选按钮

```kotlin
@Composable
fun BasicRadioButtonExample() {
    val options = listOf("男性", "女性", "其他")
    var selectedOption by remember { mutableStateOf(options[0]) }

    Column(
        verticalArrangement = Arrangement.spacedBy(8.dp)
    ) {
        Text(
            text = "性别选择",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        options.forEach { option ->
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .selectable(
                        selected = (option == selectedOption),
                        onClick = { selectedOption = option },
                        role = Role.RadioButton
                    )
                    .padding(vertical = 4.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                RadioButton(
                    selected = (option == selectedOption),
                    onClick = { selectedOption = option }
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = option,
                    style = MaterialTheme.typography.bodyLarge
                )
            }
        }

        // 显示选择结果
        Text(
            text = "已选择: $selectedOption",
            style = MaterialTheme.typography.bodyMedium,
            color = MaterialTheme.colorScheme.primary,
            modifier = Modifier.padding(top = 8.dp)
        )
    }
}
```

### 2.2 带图标和描述的单选按钮

```kotlin
@Composable
fun RichRadioButtonExample() {
    val paymentMethods = listOf(
        Triple(Icons.Default.CreditCard, "信用卡", "使用 Visa、Mastercard 等"),
        Triple(Icons.Default.AccountBalance, "银行转账", "通过银行账户直接支付"),
        Triple(Icons.Default.Wallet, "电子钱包", "支持支付宝、微信支付")
    )

    var selectedPayment by remember { mutableIntStateOf(0) }

    Column(
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        Text(
            text = "支付方式",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        paymentMethods.forEachIndexed { index, (icon, title, description) ->
            Card(
                modifier = Modifier.fillMaxWidth(),
                onClick = { selectedPayment = index },
                colors = CardDefaults.cardColors(
                    containerColor = if (selectedPayment == index)
                        MaterialTheme.colorScheme.primaryContainer
                    else MaterialTheme.colorScheme.surface
                )
            ) {
                Row(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(16.dp),
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    RadioButton(
                        selected = selectedPayment == index,
                        onClick = { selectedPayment = index }
                    )
                    Spacer(modifier = Modifier.width(12.dp))
                    Icon(
                        imageVector = icon,
                        contentDescription = null,
                        tint = MaterialTheme.colorScheme.primary,
                        modifier = Modifier.size(24.dp)
                    )
                    Spacer(modifier = Modifier.width(12.dp))
                    Column(modifier = Modifier.weight(1f)) {
                        Text(
                            text = title,
                            style = MaterialTheme.typography.titleMedium,
                            color = if (selectedPayment == index)
                                MaterialTheme.colorScheme.onPrimaryContainer
                            else MaterialTheme.colorScheme.onSurface
                        )
                        Text(
                            text = description,
                            style = MaterialTheme.typography.bodySmall,
                            color = if (selectedPayment == index)
                                MaterialTheme.colorScheme.onPrimaryContainer
                            else MaterialTheme.colorScheme.onSurfaceVariant
                        )
                    }
                }
            }
        }
    }
}
```

### 2.3 不同样式的单选按钮

```kotlin
@Composable
fun StyledRadioButtonExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 默认样式
        Row(verticalAlignment = Alignment.CenterVertically) {
            RadioButton(
                selected = true,
                onClick = { }
            )
            Spacer(modifier = Modifier.width(8.dp))
            Text("默认样式")
        }

        // 主要颜色
        Row(verticalAlignment = Alignment.CenterVertically) {
            RadioButton(
                selected = true,
                onClick = { },
                colors = RadioButtonDefaults.colors(
                    selectedColor = MaterialTheme.colorScheme.primary
                )
            )
            Spacer(modifier = Modifier.width(8.dp))
            Text("主要颜色")
        }

        // 错误颜色
        Row(verticalAlignment = Alignment.CenterVertically) {
            RadioButton(
                selected = true,
                onClick = { },
                colors = RadioButtonDefaults.colors(
                    selectedColor = MaterialTheme.colorScheme.error
                )
            )
            Spacer(modifier = Modifier.width(8.dp))
            Text("错误颜色")
        }

        // 禁用状态
        Row(verticalAlignment = Alignment.CenterVertically) {
            RadioButton(
                selected = true,
                onClick = { },
                enabled = false
            )
            Spacer(modifier = Modifier.width(8.dp))
            Text("禁用状态")
        }
    }
}
```

---

## 3. Switch 组件 - 开关切换

Switch 组件用于在两个互斥状态之间切换，常用于设置和功能开关。

### 3.1 基础开关

```kotlin
@Composable
fun BasicSwitchExample() {
    var switchState by remember { mutableStateOf(false) }

    Card {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Column(modifier = Modifier.weight(1f)) {
                Text(
                    text = "Wi-Fi",
                    style = MaterialTheme.typography.titleMedium
                )
                Text(
                    text = if (switchState) "已连接" else "已断开",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
            Switch(
                checked = switchState,
                onCheckedChange = { switchState = it }
            )
        }
    }
}
```

### 3.2 开关组

```kotlin
@Composable
fun SwitchGroupExample() {
    val switchOptions = remember {
        mutableStateMapOf(
            "Wi-Fi" to true,
            "蓝牙" to false,
            "移动数据" to true,
            "定位服务" to false,
            "自动同步" to true
        )
    }

    Column(
        verticalArrangement = Arrangement.spacedBy(4.dp)
    ) {
        Text(
            text = "网络设置",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold,
            modifier = Modifier.padding(bottom = 8.dp)
        )

        switchOptions.forEach { (label, initialState) ->
            val state = switchOptions[label] ?: initialState

            Card(
                colors = CardDefaults.cardColors(
                    containerColor = MaterialTheme.colorScheme.surfaceVariant
                )
            ) {
                Row(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(16.dp),
                    horizontalArrangement = Arrangement.SpaceBetween,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text(
                        text = label,
                        style = MaterialTheme.typography.bodyLarge
                    )
                    Switch(
                        checked = state,
                        onCheckedChange = { checked ->
                            switchOptions[label] = checked
                        }
                    )
                }
            }
        }
    }
}
```

### 3.3 自定义颜色开关

```kotlin
@Composable
fun CustomColoredSwitchExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        listOf(
            "成功" to MaterialTheme.colorScheme.primary,
            "警告" to MaterialTheme.colorScheme.secondary,
            "错误" to MaterialTheme.colorScheme.error,
            "信息" to MaterialTheme.colorScheme.tertiary
        ).forEach { (label, color) ->
            var checked by remember { mutableStateOf(false) }

            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Text(
                    text = label,
                    style = MaterialTheme.typography.bodyLarge,
                    color = color
                )
                Switch(
                    checked = checked,
                    onCheckedChange = { checked = it },
                    colors = SwitchDefaults.colors(
                        checkedThumbColor = color,
                        checkedTrackColor = color.copy(alpha = 0.3f),
                        checkedIconColor = Color.White
                    )
                )
            }
        }
    }
}
```

---

## 4. Slider 组件 - 滑块选择器

Slider 允许用户通过拖动来选择一个数值范围，适用于音量、亮度、进度等场景。

### 4.1 基础滑块

```kotlin
@Composable
fun BasicSliderExample() {
    var sliderValue by remember { mutableFloatStateOf(0.5f) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "音量控制",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Text(
                text = "${(sliderValue * 100).toInt()}%",
                style = MaterialTheme.typography.bodyLarge,
                color = MaterialTheme.colorScheme.primary
            )

            Slider(
                value = sliderValue,
                onValueChange = { sliderValue = it },
                modifier = Modifier.fillMaxWidth()
            )
        }
    }
}
```

### 4.2 带图标的滑块

```kotlin
@Composable
fun IconSliderExample() {
    var brightnessValue by remember { mutableFloatStateOf(0.7f) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "屏幕亮度",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Row(
                modifier = Modifier.fillMaxWidth(),
                verticalAlignment = Alignment.CenterVertically,
                horizontalArrangement = Arrangement.spacedBy(16.dp)
            ) {
                Icon(
                    imageVector = Icons.Default.BrightnessLow,
                    contentDescription = "低亮度",
                    tint = MaterialTheme.colorScheme.onSurfaceVariant
                )

                Slider(
                    value = brightnessValue,
                    onValueChange = { brightnessValue = it },
                    modifier = Modifier.weight(1f),
                    valueRange = 0f..1f
                )

                Icon(
                    imageVector = Icons.Default.BrightnessHigh,
                    contentDescription = "高亮度",
                    tint = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }

            Text(
                text = "亮度: ${(brightnessValue * 100).toInt()}%",
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.primary,
                modifier = Modifier.align(Alignment.CenterHorizontally)
            )
        }
    }
}
```

### 4.3 步进滑块

```kotlin
@Composable
fun StepSliderExample() {
    var qualityLevel by remember { mutableIntStateOf(3) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "视频质量",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            val qualityLevels = listOf("低", "中", "高", "超清", "4K")

            Text(
                text = "当前质量: ${qualityLevels[qualityLevel - 1]}",
                style = MaterialTheme.typography.bodyLarge,
                color = MaterialTheme.colorScheme.primary
            )

            Slider(
                value = qualityLevel.toFloat(),
                onValueChange = { qualityLevel = it.toInt() },
                valueRange = 1f..5f,
                steps = 3, // 5个值，所以有3步
                modifier = Modifier.fillMaxWidth()
            )

            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                qualityLevels.forEach { level ->
                    Text(
                        text = level,
                        style = MaterialTheme.typography.bodySmall,
                        color = if (qualityLevels[qualityLevel - 1] == level)
                            MaterialTheme.colorScheme.primary
                        else MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }
        }
    }
}
```

### 4.4 范围滑块

```kotlin
@Composable
fun RangeSliderExample() {
    var priceRange by remember { mutableStateOf(25f..75f) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "价格筛选",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Text(
                text = "¥${priceRange.start.toInt()} - ¥${priceRange.endInclusive.toInt()}",
                style = MaterialTheme.typography.bodyLarge,
                color = MaterialTheme.colorScheme.primary
            )

            RangeSlider(
                value = priceRange,
                onValueChange = { range -> priceRange = range },
                valueRange = 0f..500f,
                modifier = Modifier.fillMaxWidth()
            )

            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Text(
                    text = "¥0",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
                Text(
                    text = "¥500",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }
    }
}
```

### 4.5 自定义样式滑块

```kotlin
@Composable
fun CustomSliderExample() {
    var customValue by remember { mutableFloatStateOf(0.6f) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "自定义样式",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Slider(
                value = customValue,
                onValueChange = { customValue = it },
                modifier = Modifier.fillMaxWidth(),
                colors = SliderDefaults.colors(
                    thumbColor = MaterialTheme.colorScheme.secondary,
                    activeTrackColor = MaterialTheme.colorScheme.secondary,
                    inactiveTrackColor = MaterialTheme.colorScheme.secondaryContainer,
                    activeTickColor = MaterialTheme.colorScheme.onSecondary,
                    inactiveTickColor = MaterialTheme.colorScheme.onSecondaryContainer
                )
            )

            Text(
                text = "进度: ${(customValue * 100).toInt()}%",
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.secondary
            )
        }
    }
}
```

---

## 5. ProgressBar 组件 - 进度指示器

ProgressBar 用于显示操作进度，分为确定进度和不确定进度两种类型。

### 5.1 线性进度条

```kotlin
@Composable
fun LinearProgressBarExample() {
    var progress by remember { mutableFloatStateOf(0f) }
    var isLoading by remember { mutableStateOf(true) }

    // 模拟进度更新
    LaunchedEffect(isLoading) {
        while (isLoading) {
            delay(50)
            progress = (progress + 0.01f).coerceAtMost(1f)
            if (progress >= 1f) {
                delay(1000)
                progress = 0f
            }
        }
    }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "文件上传",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Text(
                text = "进度: ${(progress * 100).toInt()}%",
                style = MaterialTheme.typography.bodyMedium
            )

            LinearProgressIndicator(
                progress = progress,
                modifier = Modifier.fillMaxWidth()
            )

            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceEvenly
            ) {
                Button(
                    onClick = { isLoading = !isLoading },
                    modifier = Modifier.weight(1f)
                ) {
                    Text(if (isLoading) "暂停" else "开始")
                }

                Spacer(modifier = Modifier.width(8.dp))

                OutlinedButton(
                    onClick = { progress = 0f },
                    modifier = Modifier.weight(1f)
                ) {
                    Text("重置")
                }
            }
        }
    }
}
```

### 5.2 不确定进度条

```kotlin
@Composable
fun IndeterminateProgressBarExample() {
    var isLoading by remember { mutableStateOf(false) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Text(
                text = "数据加载",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            if (isLoading) {
                Text(
                    text = "正在加载数据...",
                    style = MaterialTheme.typography.bodyMedium
                )
                LinearProgressIndicator(
                    modifier = Modifier.fillMaxWidth()
                )
            }

            Button(
                onClick = { isLoading = !isLoading },
                modifier = Modifier.fillMaxWidth()
            ) {
                Text(if (isLoading) "停止加载" else "开始加载")
            }
        }
    }
}
```

### 5.3 圆形进度条

```kotlin
@Composable
fun CircularProgressBarExample() {
    var progress by remember { mutableFloatStateOf(0.7f) }
    var isIndeterminate by remember { mutableStateOf(false) }

    Card {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            Text(
                text = "圆形进度指示器",
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )

            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceEvenly,
                verticalAlignment = Alignment.CenterVertically
            ) {
                // 确定进度
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    CircularProgressIndicator(
                        progress = progress,
                        modifier = Modifier.size(64.dp)
                    )
                    Text(
                        text = "${(progress * 100).toInt()}%",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }

                // 不确定进度
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    CircularProgressIndicator(
                        modifier = Modifier.size(64.dp)
                    )
                    Text(
                        text = "加载中",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }

            // 进度控制
            Slider(
                value = progress,
                onValueChange = { progress = it },
                modifier = Modifier.fillMaxWidth()
            )

            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.spacedBy(8.dp)
            ) {
                OutlinedButton(
                    onClick = { progress = 0f },
                    modifier = Modifier.weight(1f)
                ) {
                    Text("重置")
                }

                Button(
                    onClick = { isIndeterminate = !isIndeterminate },
                    modifier = Modifier.weight(1f)
                ) {
                    Text("切换模式")
                }
            }
        }
    }
}
```

### 5.4 不同尺寸和颜色

```kotlin
@Composable
fun ProgressBarSizesExample() {
    val progress = 0.75f

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "不同尺寸的进度条",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // 小尺寸
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text("小尺寸", style = MaterialTheme.typography.titleSmall)
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    CircularProgressIndicator(
                        progress = progress,
                        modifier = Modifier.size(24.dp),
                        strokeWidth = 2.dp
                    )
                    LinearProgressIndicator(
                        progress = progress,
                        modifier = Modifier
                            .width(100.dp)
                            .height(4.dp)
                    )
                }
            }
        }

        // 中等尺寸
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text("中等尺寸", style = MaterialTheme.typography.titleSmall)
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    CircularProgressIndicator(
                        progress = progress,
                        modifier = Modifier.size(48.dp),
                        strokeWidth = 4.dp
                    )
                    LinearProgressIndicator(
                        progress = progress,
                        modifier = Modifier
                            .width(100.dp)
                            .height(8.dp)
                    )
                }
            }
        }

        // 大尺寸
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text("大尺寸", style = MaterialTheme.typography.titleSmall)
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    CircularProgressIndicator(
                        progress = progress,
                        modifier = Modifier.size(72.dp),
                        strokeWidth = 6.dp
                    )
                    LinearProgressIndicator(
                        progress = progress,
                        modifier = Modifier
                            .width(100.dp)
                            .height(12.dp)
                    )
                }
            }
        }
    }
}
```

---

## 6. 实践示例：完整的设置页面

让我们创建一个包含所有选择和输入组件的完整设置页面：

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun CompleteSettingsPage() {
    var notificationsEnabled by remember { mutableStateOf(true) }
    var darkMode by remember { mutableStateOf(false) }
    var autoUpdate by remember { mutableStateOf(true) }
    var volume by remember { mutableFloatStateOf(0.7f) }
    var fontSize by remember { mutableIntStateOf(3) }
    var downloadQuality by remember { mutableStateOf("中") }

    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("应用设置") },
                navigationIcon = {
                    IconButton(onClick = { /* 返回 */ }) {
                        Icon(Icons.Default.ArrowBack, contentDescription = "返回")
                    }
                }
            )
        }
    ) { paddingValues ->
        LazyColumn(
            modifier = Modifier
                .fillMaxSize()
                .padding(paddingValues),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            // 通知设置
            item {
                SettingsSection("通知设置") {
                    Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {
                        SettingSwitchItem(
                            title = "推送通知",
                            subtitle = "接收应用推送通知",
                            checked = notificationsEnabled,
                            onCheckedChange = { notificationsEnabled = it }
                        )

                        if (notificationsEnabled) {
                            SettingSliderItem(
                                title = "通知音量",
                                value = volume,
                                onValueChange = { volume = it },
                                valueRange = 0f..1f
                            )
                        }
                    }
                }
            }

            // 外观设置
            item {
                SettingsSection("外观设置") {
                    Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {
                        SettingSwitchItem(
                            title = "深色模式",
                            subtitle = "切换应用主题",
                            checked = darkMode,
                            onCheckedChange = { darkMode = it }
                        )

                        SettingSliderItem(
                            title = "字体大小",
                            value = fontSize.toFloat(),
                            onValueChange = { fontSize = it.toInt() },
                            valueRange = 1f..5f,
                            steps = 3,
                            valueText = listOf("很小", "小", "正常", "大", "很大")[fontSize - 1]
                        )
                    }
                }
            }

            // 下载设置
            item {
                SettingsSection("下载设置") {
                    Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {
                        SettingSwitchItem(
                            title = "自动更新",
                            subtitle = "自动下载应用更新",
                            checked = autoUpdate,
                            onCheckedChange = { autoUpdate = it }
                        )

                        SettingRadioItem(
                            title = "下载质量",
                            options = listOf("低", "中", "高", "超清"),
                            selected = downloadQuality,
                            onSelected = { downloadQuality = it }
                        )
                    }
                }
            }

            // 隐私设置
            item {
                SettingsSection("隐私设置") {
                    val privacyOptions = remember {
                        mutableStateMapOf(
                            "数据分析" to true,
                            "个性化推荐" to false,
                            "位置信息" to true
                        )
                    }

                    Column(verticalArrangement = Arrangement.spacedBy(8.dp)) {
                        privacyOptions.forEach { (title, checked) ->
                            SettingCheckboxItem(
                                title = title,
                                checked = checked,
                                onCheckedChange = { privacyOptions[title] = it }
                            )
                        }
                    }
                }
            }

            // 底部间距
            item {
                Spacer(modifier = Modifier.height(16.dp))
            }
        }
    }
}

@Composable
private fun SettingsSection(
    title: String,
    content: @Composable () -> Unit
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(horizontal = 16.dp)
    ) {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(16.dp)
        ) {
            Text(
                text = title,
                style = MaterialTheme.typography.titleMedium,
                fontWeight = FontWeight.Bold
            )
            content()
        }
    }
}

@Composable
private fun SettingSwitchItem(
    title: String,
    subtitle: String,
    checked: Boolean,
    onCheckedChange: (Boolean) -> Unit
) {
    Surface(
        modifier = Modifier.fillMaxWidth(),
        color = MaterialTheme.colorScheme.surfaceVariant,
        shape = RoundedCornerShape(12.dp)
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Column(modifier = Modifier.weight(1f)) {
                Text(
                    text = title,
                    style = MaterialTheme.typography.titleSmall
                )
                Text(
                    text = subtitle,
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
            Switch(
                checked = checked,
                onCheckedChange = onCheckedChange
            )
        }
    }
}

@Composable
private fun SettingSliderItem(
    title: String,
    value: Float,
    onValueChange: (Float) -> Unit,
    valueRange: ClosedFloatingPointRange<Float>,
    steps: Int = 0,
    valueText: String? = null
) {
    Surface(
        modifier = Modifier.fillMaxWidth(),
        color = MaterialTheme.colorScheme.surfaceVariant,
        shape = RoundedCornerShape(12.dp)
    ) {
        Column(
            modifier = Modifier.padding(16.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Text(
                    text = title,
                    style = MaterialTheme.typography.titleSmall
                )
                Text(
                    text = valueText ?: "${(value * 100).toInt()}%",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.primary
                )
            }
            Slider(
                value = value,
                onValueChange = onValueChange,
                valueRange = valueRange,
                steps = steps
            )
        }
    }
}

@Composable
private fun SettingCheckboxItem(
    title: String,
    checked: Boolean,
    onCheckedChange: (Boolean) -> Unit
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .selectable(
                selected = checked,
                onClick = { onCheckedChange(!checked) },
                role = Role.Checkbox
            )
            .padding(vertical = 4.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Checkbox(
            checked = checked,
            onCheckedChange = onCheckedChange
        )
        Spacer(modifier = Modifier.width(12.dp))
        Text(
            text = title,
            style = MaterialTheme.typography.bodyMedium
        )
    }
}

@Composable
private fun SettingRadioItem(
    title: String,
    options: List<String>,
    selected: String,
    onSelected: (String) -> Unit
) {
    Column(
        verticalArrangement = Arrangement.spacedBy(4.dp)
    ) {
        Text(
            text = title,
            style = MaterialTheme.typography.titleSmall
        )

        options.forEach { option ->
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .selectable(
                        selected = option == selected,
                        onClick = { onSelected(option) },
                        role = Role.RadioButton
                    )
                    .padding(vertical = 2.dp),
                verticalAlignment = Alignment.CenterVertically
            ) {
                RadioButton(
                    selected = option == selected,
                    onClick = { onSelected(option) }
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = option,
                    style = MaterialTheme.typography.bodyMedium
                )
            }
        }
    }
}
```

---

## 7. 最佳实践

### 7.1 无障碍性考虑

1. **添加语义角色**：为选择组件添加适当的 Role（Checkbox、RadioButton 等）
2. **提供内容描述**：为图标和复杂组件添加 contentDescription
3. **支持键盘导航**：确保组件可以通过键盘访问

### 7.2 状态管理

1. **使用 remember 管理状态**：对于组件内部状态使用 remember
2. **状态提升**：将状态提升到需要共享数据的最近共同祖先组件
3. **避免状态不一致**：确保 UI 状态与数据状态保持同步

### 7.3 用户体验

1. **提供即时反馈**：用户操作后立即更新 UI
2. **合理的默认值**：为选择组件设置合理的默认值
3. **清晰的视觉反馈**：使用颜色、动画等提供清晰的反馈

---

## 8. 总结

选择和输入组件是用户交互的核心，通过掌握这些组件，你可以：

1. **收集用户选择**：使用 Checkbox、RadioButton、Switch 处理用户选择
2. **数值输入控制**：使用 Slider 提供直观的数值选择方式
3. **进度显示**：使用 ProgressBar 显示操作进度
4. **构建完整的交互界面**：结合所有组件创建功能丰富的设置页面

在下一篇文章中，我们将探讨列表组件，学习如何高效地展示和操作大量数据。

---

## 相关资源

- [Material 3 Selection Controls Documentation](https://m3.material.io/components/selection-controls)
- [Compose Input Documentation](https://developer.android.com/jetpack/compose/text)
- [Compose Progress Documentation](https://developer.android.com/jetpack/compose/progress)

---

*本文基于 Android Jetpack Compose 最新版本编写，部分 API 可能会随着版本更新而变化。*