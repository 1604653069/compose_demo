# Jetpack Compose 图像组件完全指南

## 前言

在现代移动应用中，图像组件是吸引用户注意力的重要元素。Jetpack Compose 提供了强大的图像处理能力，包括本地资源图片、网络图片加载、图标系统等功能。本文将详细介绍 Compose 中的图像组件，帮助你构建视觉丰富且性能优异的图像界面。

---

## 1. Image 组件 - 基础图片显示

Image 组件是 Compose 中最基础的图片显示组件，支持多种图片源和显示方式。

### 1.1 本地资源图片

```kotlin
@Composable
fun LocalImageExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "本地资源图片",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // 基础本地图片
        Card {
            AsyncImage(
                model = R.drawable.sample_image, // 替换为实际的资源ID
                contentDescription = "示例图片",
                modifier = Modifier
                    .fillMaxWidth()
                    .height(200.dp),
                contentScale = ContentScale.Crop
            )
        }

        // 带标题的图片
        Card(
            elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
        ) {
            Column {
                AsyncImage(
                    model = R.drawable.hero_image, // 替换为实际的资源ID
                    contentDescription = "英雄图片",
                    modifier = Modifier
                        .fillMaxWidth()
                        .height(180.dp),
                    contentScale = ContentScale.Crop
                )
                Column(
                    modifier = Modifier.padding(16.dp)
                ) {
                    Text(
                        text = "美丽风景",
                        style = MaterialTheme.typography.titleMedium
                    )
                    Text(
                        text = "这是一张美丽的风景照片，展示了大自然的魅力。",
                        style = MaterialTheme.typography.bodyMedium,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }
        }
    }
}
```

### 1.2 图片形状和裁剪

```kotlin
@Composable
fun ImageShapesExample() {
    val imageUrl = "https://picsum.photos/200/200"

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "不同形状的图片",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceEvenly
        ) {
            // 圆形图片
            Card {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "圆形图片",
                        modifier = Modifier
                            .size(80.dp)
                            .clip(CircleShape),
                        contentScale = ContentScale.Crop
                    )
                    Text(
                        text = "圆形",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 8.dp)
                    )
                }
            }

            // 圆角矩形
            Card {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "圆角图片",
                        modifier = Modifier
                            .size(80.dp)
                            .clip(RoundedCornerShape(16.dp)),
                        contentScale = ContentScale.Crop
                    )
                    Text(
                        text = "圆角",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 8.dp)
                    )
                }
            }

            // 切角矩形
            Card {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "切角图片",
                        modifier = Modifier
                            .size(80.dp)
                            .clip(MaterialTheme.shapes.medium),
                        contentScale = ContentScale.Crop
                    )
                    Text(
                        text = "切角",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 8.dp)
                    )
                }
            }
        }
    }
}
```

### 1.3 内容缩放模式

```kotlin
@Composable
fun ContentScaleExample() {
    val imageUrl = "https://picsum.photos/400/300"

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "内容缩放模式",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        val contentScales = listOf(
            "Crop" to ContentScale.Crop,
            "Fit" to ContentScale.Fit,
            "FillBounds" to ContentScale.FillBounds,
            "Inside" to ContentScale.Inside,
            "FillWidth" to ContentScale.FillWidth,
            "FillHeight" to ContentScale.FillHeight
        )

        contentScales.forEach { (name, scale) ->
            Card {
                Column(modifier = Modifier.padding(16.dp)) {
                    Text(
                        text = name,
                        style = MaterialTheme.typography.titleSmall,
                        fontWeight = FontWeight.Medium
                    )
                    Spacer(modifier = Modifier.height(8.dp))
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "$name 模式示例",
                        modifier = Modifier
                            .fillMaxWidth()
                            .height(120.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = scale
                    )
                }
            }
        }
    }
}
```

### 1.4 颜色滤镜和效果

```kotlin
@Composable
fun ImageFiltersExample() {
    val imageUrl = "https://picsum.photos/300/300"

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "颜色滤镜和效果",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            // 原图
            Card(modifier = Modifier.weight(1f)) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "原图",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop
                    )
                    Text(
                        text = "原图",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }

            // 灰度
            Card(modifier = Modifier.weight(1f)) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "灰度",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        colorFilter = ColorFilter.colorMatrix(
                            androidx.compose.ui.graphics.ColorMatrix().apply {
                                setToSaturation(0f)
                            }
                        )
                    )
                    Text(
                        text = "灰度",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }

            // 色调
            Card(modifier = Modifier.weight(1f)) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "色调",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        colorFilter = ColorFilter.tint(MaterialTheme.colorScheme.primary)
                    )
                    Text(
                        text = "色调",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }
        }

        // 高级效果
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            // 亮度增强
            Card(modifier = Modifier.weight(1f)) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "亮度增强",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        colorFilter = ColorFilter.colorMatrix(
                            androidx.compose.ui.graphics.ColorMatrix().apply {
                                setToScale(1.2f, 1.2f, 1.2f, 1f)
                            }
                        )
                    )
                    Text(
                        text = "亮度+",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }

            // 对比度增强
            Card(modifier = Modifier.weight(1f)) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "对比度增强",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        colorFilter = ColorFilter.colorMatrix(
                            androidx.compose.ui.graphics.ColorMatrix().apply {
                                setToScale(1.5f, 1.5f, 1.5f, 1f)
                            }
                        )
                    )
                    Text(
                        text = "对比度+",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }

            // 反色
            Card(modifier = Modifier.weight(1f)) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    AsyncImage(
                        model = imageUrl,
                        contentDescription = "反色",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        colorFilter = ColorFilter.colorMatrix(
                            androidx.compose.ui.graphics.ColorMatrix().apply {
                                setToScale(-1f, -1f, -1f, 1f)
                            }
                        )
                    )
                    Text(
                        text = "反色",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }
        }
    }
}
```

---

## 2. AsyncImage 组件 - 异步图片加载

AsyncImage 是 Coil 图片加载库在 Compose 中的实现，专门用于加载网络图片。

### 2.1 基础异步图片加载

```kotlin
@Composable
fun BasicAsyncImageExample() {
    var imageUrl by remember { mutableStateOf("https://picsum.photos/400/300") }
    var loadCount by remember { mutableIntStateOf(0) }
    val context = LocalContext.current

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "基础异步图片加载",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // 图片显示
        Card {
            AsyncImage(
                model = ImageRequest.Builder(context)
                    .data(imageUrl)
                    .crossfade(true)
                    .build(),
                contentDescription = "异步加载的图片",
                modifier = Modifier
                    .fillMaxWidth()
                    .height(200.dp)
                    .clip(RoundedCornerShape(8.dp)),
                contentScale = ContentScale.Crop,
                onSuccess = { loadCount++ }
            )
        }

        // 状态信息
        Text(
            text = "加载次数: $loadCount",
            style = MaterialTheme.typography.bodyMedium,
            color = MaterialTheme.colorScheme.primary
        )

        // 图片URL输入
        OutlinedTextField(
            value = imageUrl,
            onValueChange = { imageUrl = it },
            label = { Text("图片URL") },
            modifier = Modifier.fillMaxWidth()
        )
    }
}
```

### 2.2 自定义加载状态

```kotlin
@Composable
fun CustomLoadingStatesExample() {
    val context = LocalContext.current

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "自定义加载状态",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // 带加载状态的图片
        Card {
            Box(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(200.dp)
            ) {
                AsyncImage(
                    model = ImageRequest.Builder(context)
                        .data("https://picsum.photos/400/300?random=${System.currentTimeMillis()}")
                        .crossfade(1000)
                        .build(),
                    contentDescription = "带加载状态的图片",
                    modifier = Modifier
                        .fillMaxWidth()
                        .height(200.dp)
                        .clip(RoundedCornerShape(8.dp)),
                    contentScale = ContentScale.Crop,
                    loading = {
                        Box(
                            modifier = Modifier.fillMaxSize(),
                            contentAlignment = Alignment.Center
                        ) {
                            Column(
                                horizontalAlignment = Alignment.CenterHorizontally
                            ) {
                                CircularProgressIndicator()
                                Spacer(modifier = Modifier.height(8.dp))
                                Text(
                                    text = "加载中...",
                                    style = MaterialTheme.typography.bodySmall
                                )
                            }
                        }
                    },
                    error = {
                        Box(
                            modifier = Modifier.fillMaxSize(),
                            contentAlignment = Alignment.Center
                        ) {
                            Column(
                                horizontalAlignment = Alignment.CenterHorizontally
                            ) {
                                Icon(
                                    imageVector = Icons.Default.Error,
                                    contentDescription = "加载错误",
                                    tint = MaterialTheme.colorScheme.error,
                                    modifier = Modifier.size(48.dp)
                                )
                                Spacer(modifier = Modifier.height(8.dp))
                                Text(
                                    text = "加载失败",
                                    style = MaterialTheme.typography.bodySmall,
                                    color = MaterialTheme.colorScheme.error
                                )
                            }
                        }
                    }
                )
            }
        }

        // 重试按钮
        Button(
            onClick = {
                // 触发重新加载
            },
            modifier = Modifier.fillMaxWidth()
        ) {
            Text("重新加载")
        }
    }
}
```

### 2.3 占位符和错误处理

```kotlin
@Composable
fun PlaceholderAndErrorExample() {
    val context = LocalContext.current

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "占位符和错误处理",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        ) {
            // 正常图片
            Card {
                Column(modifier = Modifier.padding(16.dp)) {
                    Text(
                        text = "正常加载",
                        style = MaterialTheme.typography.titleSmall,
                        fontWeight = FontWeight.Medium
                    )
                    Spacer(modifier = Modifier.height(8.dp))
                    AsyncImage(
                        model = ImageRequest.Builder(context)
                            .data("https://picsum.photos/300/200?random=1")
                            .build(),
                        contentDescription = "正常图片",
                        modifier = Modifier
                            .fillMaxWidth()
                            .height(150.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        placeholder = painterResource(android.R.drawable.ic_menu_gallery),
                        error = painterResource(android.R.drawable.ic_menu_close_clear_cancel)
                    )
                }
            }

            // 错误图片
            Card {
                Column(modifier = Modifier.padding(16.dp)) {
                    Text(
                        text = "加载错误",
                        style = MaterialTheme.typography.titleSmall,
                        fontWeight = FontWeight.Medium
                    )
                    Spacer(modifier = Modifier.height(8.dp))
                    AsyncImage(
                        model = "https://invalid-url-that-will-fail.com/image.jpg",
                        contentDescription = "加载失败的图片",
                        modifier = Modifier
                            .fillMaxWidth()
                            .height(150.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop,
                        placeholder = painterResource(android.R.drawable.ic_menu_gallery),
                        error = painterResource(android.R.drawable.ic_menu_close_clear_cancel)
                    )
                }
            }
        }
    }
}
```

### 2.4 缓存策略

```kotlin
@Composable
fun CacheStrategyExample() {
    val context = LocalContext.current

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "缓存策略演示",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            // 启用内存缓存
            Card(modifier = Modifier.weight(1f)) {
                Column(
                    modifier = Modifier.padding(12.dp),
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    AsyncImage(
                        model = ImageRequest.Builder(context)
                            .data("https://picsum.photos/150/150?random=2")
                            .memoryCachePolicy(coil.request.CachePolicy.ENABLED)
                            .build(),
                        contentDescription = "启用内存缓存",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop
                    )
                    Text(
                        text = "启用缓存",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }

            // 禁用内存缓存
            Card(modifier = Modifier.weight(1f)) {
                Column(
                    modifier = Modifier.padding(12.dp),
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    AsyncImage(
                        model = ImageRequest.Builder(context)
                            .data("https://picsum.photos/150/150?random=3")
                            .memoryCachePolicy(coil.request.CachePolicy.DISABLED)
                            .build(),
                        contentDescription = "禁用内存缓存",
                        modifier = Modifier
                            .size(100.dp)
                            .clip(RoundedCornerShape(8.dp)),
                        contentScale = ContentScale.Crop
                    )
                    Text(
                        text = "禁用缓存",
                        style = MaterialTheme.typography.bodySmall,
                        modifier = Modifier.padding(top = 4.dp)
                    )
                }
            }
        }

        Text(
            text = "左图：启用缓存（快速重复加载） | 右图：禁用缓存（每次重新加载）",
            style = MaterialTheme.typography.bodySmall,
            color = MaterialTheme.colorScheme.onSurfaceVariant
        )
    }
}
```

### 2.5 图片转换

```kotlin
@Composable
fun ImageTransformationExample() {
    val context = LocalContext.current

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "图片转换效果",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // 圆形转换
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "圆形 + 模糊背景",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(8.dp))
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    // 原图
                    AsyncImage(
                        model = ImageRequest.Builder(context)
                            .data("https://picsum.photos/150/150?random=4")
                            .build(),
                        contentDescription = "原图",
                        modifier = Modifier.size(80.dp),
                        contentScale = ContentScale.Crop
                    )

                    // 圆形 + 灰度
                    AsyncImage(
                        model = ImageRequest.Builder(context)
                            .data("https://picsum.photos/150/150?random=4")
                            .build(),
                        contentDescription = "圆形灰度",
                        modifier = Modifier.size(80.dp),
                        contentScale = ContentScale.Crop,
                        colorFilter = ColorFilter.colorMatrix(
                            androidx.compose.ui.graphics.ColorMatrix().apply {
                                setToSaturation(0f)
                            }
                        )
                    )
                }
            }
        }

        // 高级转换
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "高级转换效果",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(8.dp))
                LazyRow(
                    horizontalArrangement = Arrangement.spacedBy(12.dp)
                ) {
                    items(5) { index ->
                        AsyncImage(
                            model = ImageRequest.Builder(context)
                                .data("https://picsum.photos/120/120?random=${index + 5}")
                                .transformations(
                                    coil.transform.CircleCropTransformation(),
                                    coil.transform.GrayscaleTransformation()
                                )
                                .build(),
                            contentDescription = "转换图片 $index",
                            modifier = Modifier.size(80.dp),
                            contentScale = ContentScale.Crop
                        )
                    }
                }
            }
        }
    }
}
```

---

## 3. Icon 组件 - 图标系统

Icon 组件是 Compose 中的图标显示组件，支持 Material Icons 和自定义图标。

### 3.1 基础图标

```kotlin
@Composable
fun BasicIconExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "基础图标",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // Material Icons
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "Material Icons",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(12.dp))

                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    listOf(
                        Icons.Default.Home to "主页",
                        Icons.Default.Search to "搜索",
                        Icons.Default.Settings to "设置",
                        Icons.Default.Person to "个人"
                    ).forEach { (icon, name) ->
                        Column(horizontalAlignment = Alignment.CenterHorizontally) {
                            Icon(
                                imageVector = icon,
                                contentDescription = name,
                                modifier = Modifier.size(32.dp)
                            )
                            Text(
                                text = name,
                                style = MaterialTheme.typography.bodySmall
                            )
                        }
                    }
                }
            }
        }

        // 填充图标和轮廓图标
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "填充图标 vs 轮廓图标",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(12.dp))

                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    // 填充图标
                    Column(horizontalAlignment = Alignment.CenterHorizontally) {
                        Icon(
                            imageVector = Icons.Default.Favorite,
                            contentDescription = "填充爱心",
                            tint = MaterialTheme.colorScheme.error,
                            modifier = Modifier.size(32.dp)
                        )
                        Text(
                            text = "填充",
                            style = MaterialTheme.typography.bodySmall
                        )
                    }

                    // 轮廓图标
                    Column(horizontalAlignment = Alignment.CenterHorizontally) {
                        Icon(
                            imageVector = Icons.Outlined.FavoriteBorder,
                            contentDescription = "轮廓爱心",
                            tint = MaterialTheme.colorScheme.error,
                            modifier = Modifier.size(32.dp)
                        )
                        Text(
                            text = "轮廓",
                            style = MaterialTheme.typography.bodySmall
                        )
                    }
                }
            }
        }
    }
}
```

### 3.2 图标尺寸和颜色

```kotlin
@Composable
fun IconSizeAndColorExample() {
    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // 不同尺寸
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "不同尺寸的图标",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(12.dp))

                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    listOf(16, 24, 32, 48, 64).forEach { size ->
                        Column(horizontalAlignment = Alignment.CenterHorizontally) {
                            Icon(
                                imageVector = Icons.Default.Star,
                                contentDescription = "${size}dp 图标",
                                modifier = Modifier.size(size.dp)
                            )
                            Text(
                                text = "${size}dp",
                                style = MaterialTheme.typography.bodySmall
                            )
                        }
                    }
                }
            }
        }

        // 不同颜色
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "不同颜色的图标",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(12.dp))

                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    listOf(
                        MaterialTheme.colorScheme.primary to "主要",
                        MaterialTheme.colorScheme.secondary to "次要",
                        MaterialTheme.colorScheme.tertiary to "第三",
                        MaterialTheme.colorScheme.error to "错误",
                        MaterialTheme.colorScheme.onSurface to "表面"
                    ).forEach { (color, name) ->
                        Column(horizontalAlignment = Alignment.CenterHorizontally) {
                            Surface(
                                modifier = Modifier.size(60.dp),
                                shape = CircleShape,
                                color = color.copy(alpha = 0.1f)
                            ) {
                                Box(contentAlignment = Alignment.Center) {
                                    Icon(
                                        imageVector = Icons.Default.Favorite,
                                        contentDescription = name,
                                        tint = color,
                                        modifier = Modifier.size(32.dp)
                                    )
                                }
                            }
                            Text(
                                text = name,
                                style = MaterialTheme.typography.bodySmall
                            )
                        }
                    }
                }
            }
        }
    }
}
```

### 3.3 图标按钮和交互

```kotlin
@Composable
fun InteractiveIconExample() {
    var isFavorite by remember { mutableStateOf(false) }
    var isDarkMode by remember { mutableStateOf(false) }

    Column(
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        Text(
            text = "交互式图标",
            style = MaterialTheme.typography.titleMedium,
            fontWeight = FontWeight.Bold
        )

        // 图标按钮
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "图标按钮",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(12.dp))

                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    // IconButton
                    IconButton(onClick = { /* 处理点击 */ }) {
                        Icon(
                            imageVector = Icons.Default.Call,
                            contentDescription = "通话"
                        )
                    }

                    // 可点击的 Surface
                    Surface(
                        onClick = { /* 处理点击 */ },
                        modifier = Modifier.size(48.dp),
                        shape = CircleShape,
                        color = MaterialTheme.colorScheme.primaryContainer,
                        shadowElevation = 4.dp
                    ) {
                        Box(contentAlignment = Alignment.Center) {
                            Icon(
                                imageVector = Icons.Default.Message,
                                contentDescription = "消息",
                                tint = MaterialTheme.colorScheme.onPrimaryContainer
                            )
                        }
                    }

                    // 切换状态的图标
                    IconButton(onClick = { isFavorite = !isFavorite }) {
                        Icon(
                            imageVector = if (isFavorite) Icons.Default.Favorite else Icons.Default.FavoriteBorder,
                            contentDescription = if (isFavorite) "取消收藏" else "收藏",
                            tint = if (isFavorite) MaterialTheme.colorScheme.error else MaterialTheme.colorScheme.onSurface
                        )
                    }
                }
            }
        }

        // 带徽章的图标
        Card {
            Column(modifier = Modifier.padding(16.dp)) {
                Text(
                    text = "带徽章的图标",
                    style = MaterialTheme.typography.titleSmall,
                    fontWeight = FontWeight.Medium
                )
                Spacer(modifier = Modifier.height(12.dp))

                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceEvenly
                ) {
                    BadgeWithIcon(Icons.Default.Notifications, "通知", 5)
                    BadgeWithIcon(Icons.Default.Email, "邮件", 12)
                    BadgeWithIcon(Icons.Default.Message, "消息", 99)
                    BadgeWithIcon(Icons.Default.ShoppingCart, "购物车", 3)
                }
            }
        }
    }
}

@Composable
private fun BadgeWithIcon(icon: ImageVector, name: String, count: Int) {
    Box {
        Column(horizontalAlignment = Alignment.CenterHorizontally) {
            Surface(
                modifier = Modifier.size(48.dp),
                shape = CircleShape,
                color = MaterialTheme.colorScheme.surfaceVariant
            ) {
                Box(contentAlignment = Alignment.Center) {
                    Icon(
                        imageVector = icon,
                        contentDescription = name,
                        tint = MaterialTheme.colorScheme.onSurfaceVariant,
                        modifier = Modifier.size(24.dp)
                    )
                }
            }
            Text(
                text = name,
                style = MaterialTheme.typography.bodySmall
            )
        }

        if (count > 0) {
            Badge(
                modifier = Modifier.offset(x = 8.dp, y = (-8).dp)
            ) {
                Text(
                    text = if (count > 99) "99+" else count.toString(),
                    style = MaterialTheme.typography.bodySmall
                )
            }
        }
    }
}
```

---

## 4. 实践示例：完整的图片库

```kotlin
@Composable
fun ImageGalleryExample() {
    var selectedCategory by remember { mutableStateOf("全部") }
    var selectedImage by remember { mutableStateOf<ImageItem?>(null) }
    val context = LocalContext.current

    val categories = listOf("全部", "自然", "城市", "人物", "动物", "建筑")
    val images = generateImageGallery()

    val filteredImages = remember(selectedCategory, images) {
        if (selectedCategory == "全部") images
        else images.filter { it.category == selectedCategory }
    }

    Column(
        modifier = Modifier.fillMaxSize()
    ) {
        // 标题
        Text(
            text = "图片库",
            style = MaterialTheme.typography.headlineMedium,
            fontWeight = FontWeight.Bold,
            modifier = Modifier.padding(16.dp)
        )

        // 分类选择
        LazyRow(
            horizontalArrangement = Arrangement.spacedBy(8.dp),
            contentPadding = PaddingValues(horizontal = 16.dp)
        ) {
            items(categories) { category ->
                FilterChip(
                    onClick = { selectedCategory = category },
                    label = { Text(category) },
                    selected = selectedCategory == category
                )
            }
        }

        Spacer(modifier = Modifier.height(16.dp))

        // 图片网格
        LazyVerticalGrid(
            columns = GridCells.Adaptive(minSize = 150.dp),
            contentPadding = PaddingValues(16.dp),
            horizontalArrangement = Arrangement.spacedBy(8.dp),
            verticalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            items(filteredImages) { image ->
                GalleryImageItem(
                    image = image,
                    context = context,
                    onClick = { selectedImage = image }
                )
            }
        }
    }

    // 图片详情弹窗
    selectedImage?.let { image ->
        ImageDetailDialog(
            image = image,
            context = context,
            onDismiss = { selectedImage = null }
        )
    }
}

@Composable
private fun GalleryImageItem(
    image: ImageItem,
    context: Context,
    onClick: () -> Unit
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .height(200.dp)
            .clickable { onClick() },
        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
    ) {
        Box {
            AsyncImage(
                model = ImageRequest.Builder(context)
                    .data(image.url)
                    .crossfade(true)
                    .build(),
                contentDescription = image.title,
                modifier = Modifier.fillMaxSize(),
                contentScale = ContentScale.Crop,
                loading = {
                    Box(
                        modifier = Modifier.fillMaxSize(),
                        contentAlignment = Alignment.Center
                    ) {
                        CircularProgressIndicator()
                    }
                },
                error = {
                    Box(
                        modifier = Modifier
                            .fillMaxSize()
                            .background(MaterialTheme.colorScheme.surfaceVariant),
                        contentAlignment = Alignment.Center
                    ) {
                        Column(
                            horizontalAlignment = Alignment.CenterHorizontally
                        ) {
                            Icon(
                                imageVector = Icons.Default.BrokenImage,
                                contentDescription = "加载失败",
                                modifier = Modifier.size(48.dp),
                                tint = MaterialTheme.colorScheme.onSurfaceVariant
                            )
                            Text(
                                text = "加载失败",
                                style = MaterialTheme.typography.bodySmall
                            )
                        }
                    }
                }
            )

            // 图片信息
            Surface(
                modifier = Modifier
                    .fillMaxWidth()
                    .align(Alignment.BottomCenter),
                color = MaterialTheme.colorScheme.surface.copy(alpha = 0.8f)
            ) {
                Column(
                    modifier = Modifier.padding(8.dp)
                ) {
                    Text(
                        text = image.title,
                        style = MaterialTheme.typography.titleSmall,
                        maxLines = 1
                    )
                    Text(
                        text = image.category,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }
        }
    }
}

@Composable
private fun ImageDetailDialog(
    image: ImageItem,
    context: Context,
    onDismiss: () -> Unit
) {
    Dialog(onDismissRequest = onDismiss) {
        Card(
            modifier = Modifier
                .fillMaxWidth()
                .height(500.dp),
            shape = RoundedCornerShape(16.dp)
        ) {
            Column {
                // 顶部栏
                Row(
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(16.dp),
                    horizontalArrangement = Arrangement.SpaceBetween,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text(
                        text = image.title,
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )
                    IconButton(onClick = onDismiss) {
                        Icon(
                            imageVector = Icons.Default.Close,
                            contentDescription = "关闭"
                        )
                    }
                }

                // 大图显示
                AsyncImage(
                    model = ImageRequest.Builder(context)
                        .data(image.url)
                        .build(),
                    contentDescription = image.title,
                    modifier = Modifier
                        .fillMaxWidth()
                        .weight(1f)
                        .padding(horizontal = 16.dp),
                    contentScale = ContentScale.Fit
                )

                // 底部信息
                Column(
                    modifier = Modifier.padding(16.dp)
                ) {
                    Text(
                        text = image.description,
                        style = MaterialTheme.typography.bodyMedium
                    )
                    Spacer(modifier = Modifier.height(8.dp))
                    Row(
                        modifier = Modifier.fillMaxWidth(),
                        horizontalArrangement = Arrangement.SpaceBetween
                    ) {
                        Text(
                            text = "分类: ${image.category}",
                            style = MaterialTheme.typography.bodySmall,
                            color = MaterialTheme.colorScheme.onSurfaceVariant
                        )
                        Row {
                            IconButton(onClick = { /* 分享 */ }) {
                                Icon(
                                    imageVector = Icons.Default.Share,
                                    contentDescription = "分享"
                                )
                            }
                            IconButton(onClick = { /* 收藏 */ }) {
                                Icon(
                                    imageVector = Icons.Default.FavoriteBorder,
                                    contentDescription = "收藏"
                                )
                            }
                        }
                    }
                }
            }
        }
    }
}

// 图片数据类
data class ImageItem(
    val id: Int,
    val title: String,
    val description: String,
    val url: String,
    val category: String
)

// 生成图片数据
private fun generateImageGallery(): List<ImageItem> {
    val categories = listOf("自然", "城市", "人物", "动物", "建筑")
    return (1..50).map { index ->
        val category = categories.random()
        ImageItem(
            id = index,
            title = "图片 $index",
            description = "这是第 $index 张图片的详细描述，展示了${category}相关的美丽景色。",
            url = "https://picsum.photos/400/300?random=$index",
            category = category
        )
    }
}
```

---

## 5. 最佳实践

### 5.1 性能优化

1. **合理使用缓存**：为常用图片启用内存缓存
2. **选择合适的内容缩放**：根据使用场景选择合适的 ContentScale
3. **图片尺寸优化**：根据显示尺寸加载合适大小的图片
4. **避免过度转换**：减少不必要的图片转换操作

### 5.2 用户体验

1. **提供加载状态**：显示加载指示器或占位符
2. **优雅的错误处理**：提供友好的错误提示和重试机制
3. **渐进式加载**：使用 crossfade 实现平滑的图片切换
4. **适配不同屏幕**：确保图片在不同设备上都能正常显示

### 5.3 无障碍性

1. **提供内容描述**：为所有图片添加适当的 contentDescription
2. **支持高对比度**：确保图片在高对比度模式下可见
3. **图标语义化**：使用语义化的图标和描述

---

## 6. 总结

Jetpack Compose 的图像组件系统提供了完整的图片处理能力：

1. **Image 组件**：处理本地资源和基础图片显示
2. **AsyncImage 组件**：强大的网络图片加载，支持缓存和转换
3. **Icon 组件**：Material Design 图标系统，支持交互和动画
4. **丰富的自定义选项**：形状、滤镜、动画等视觉效果
5. **性能优化**：懒加载、缓存、内存管理等优化策略

通过合理使用这些组件，你可以构建视觉丰富、性能优异的图像界面。

在下一篇文章中，我们将探讨对话框和弹窗组件，学习如何实现模态交互和临时信息展示。

---

## 相关资源

- [Coil Image Loading Library](https://coil-kt.github.io/coil/)
- [Material Icons Documentation](https://fonts.google.com/icons)
- [Compose Image Documentation](https://developer.android.com/jetpack/compose/graphics/images)
- [ContentScale Documentation](https://developer.android.com/jetpack/compose/graphics/images/images#content-scale)

---

*本文基于 Android Jetpack Compose 最新版本编写，部分 API 可能会随着版本更新而变化。*